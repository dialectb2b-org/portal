/*!
 * jodit-pro - PRO Version of Jodit Editor
 * Author: Chupurnov Valeriy <chupurnov@gmail.com>
 * Version: v4.1.14
 * Url: https://xdsoft.net/jodit/pro/
 * License(s): SEE LICENSE IN LICENSE.md
 */


((t,e)=>{if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var o in s)("object"==typeof exports?exports:t)[o]=s[o]}})(self,(function(){return(self.webpackChunkjodit_pro=self.webpackChunkjodit_pro||[]).push([[736],{72681(t){t.exports='<?xml version="1.0" ?><svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><title/><g id="Upload"><path d="M16,26h8V50a2,2,0,0,0,2,2H38a2,2,0,0,0,2-2V26h8a2,2,0,0,0,1.4946-3.3291l-16-18a2,2,0,0,0-2.9892,0l-16,18A2,2,0,0,0,16,26ZM32,9.0107,43.5464,22H38a2,2,0,0,0-2,2V48H28V24a2,2,0,0,0-2-2H20.4536Z"/><path d="M53,42a2,2,0,0,0-2,2V54a2.0023,2.0023,0,0,1-2,2H15a2.0023,2.0023,0,0,1-2-2V44a2,2,0,0,0-4,0V54a6.0066,6.0066,0,0,0,6,6H49a6.0066,6.0066,0,0,0,6-6V44A2,2,0,0,0,53,42Z"/></g></svg>'},67599(t,e,s){"use strict";s.r(e),s.d(e,{backup(){return h}});var o=s(31635),i=s(53557),n=s(65564),a=s(76185),r=(s(27663),s(3146)),c=s(21233),l=s(25511);class h extends n.k{constructor(){super(...arguments),this.hasStyle=!l.A.fatMode,this.buttons=[{name:"backup.restore",group:"history"}],this.__box=new c.Y(this.j),this.__dialog=null,this.__storage=this.jodit.o.backup.remoteStore??new r.h(this.jodit),this.timeout=0}afterInit(t){t.registerCommand("saveBackup",this.onSaveBackup).registerCommand("openBackupDialog",{exec:this.onOpenBackupDialog,hotkeys:t.o.backup.hotkeys});const e=()=>{this.timeout=t.async.setTimeout((()=>{this.onSaveBackup(),e()}),1e3*t.o.backup.interval)};e(),t.e.on(this.__box,"choose",this.onSelectItem).on(t.ow,"beforeunload.backup",(()=>{this.onSaveBackup()}))}prepareDialog(){this.__dialog||(this.__dialog=this.j.dlg({minWidth:this.j.o.backup.dialogWidth,buttons:["fullsize","dialog.close"]}).setContent(this.__box.container)),this.__dialog.setHeader(this.jodit.i18n("Restore")),this.addButtonsToDialog()}onSaveBackup(){this.__storage.add({created:new Date,html:this.j.value})}async onOpenBackupDialog(){this.prepareDialog();const{__dialog:t}=this;if(!t)return;t.open().setModal(!0);const e=await this.__storage.items();this.__box.build([{created:new Date,html:this.j.value},...e]),t.calcAutoSize(),t.setPosition()}onSelectItem(t){this.__dialog?.close(),this.j.value=t.html,this.j.s.focus()}addButtonsToDialog(){const{jodit:t}=this,e=(0,a.$n)(t,{name:"ok",tabIndex:0,variant:"primary",text:"Ok"}),s=(0,a.$n)(t,{variant:"secondary",tabIndex:0,text:"Cancel"}),o=(0,a.$n)(t,{name:"clear",tabIndex:0,variant:"secondary",text:"Remove all"});e.onAction((()=>{this.__box.chooseSelected()})),s.onAction((()=>{this.__dialog?.close()})),o.onAction((()=>{t.confirm("Are you sure?",void 0,(t=>{t&&(this.__storage.clear(),this.__dialog?.close())}))}));const i=new a.Yh(t,[o,s,e]);i.container.style.margin="0",i.container.style.justifyContent="flex-end",i.container.style.width="100%",this.__dialog?.setFooter(i)}beforeDestruct(){const{j:t}=this;t.async.clearTimeout(this.timeout),t.e.off(this.__box,"choose",this.onSelectItem).off(t.ow,"beforeunload.backup"),this.__box.destruct(),this.__dialog?.destruct()}}h.requires=["license"],(0,o.Cg)([i.autobind],h.prototype,"onSaveBackup",null),(0,o.Cg)([i.autobind],h.prototype,"onOpenBackupDialog",null),(0,o.Cg)([i.autobind],h.prototype,"onSelectItem",null),l.A.plugins.add("backup",h)},27663(t,e,s){"use strict";var o=s(51431),i=s(80004),n=s(72681),a=s.n(n),r=s(72795),c=s(91288);c.T.prototype.backup={interval:30,limit:50,dialogWidth:700,hotkeys:["ctrl+shift+b","cmd+shift+b"]},c.T.prototype.controls.backup={store:{command:"saveBackup",text:"Save backup now"},restore:{tooltip:"Restore",list:["backup.store"],exec(t){t.execCommand("openBackupDialog")}}},i.I.set("restore",a()),(0,o.JW)(r)},72795(t,e,s){"use strict";s.r(e)},3146(t,e,s){"use strict";s.d(e,{h(){return o}});class o{constructor(t){this.jodit=t,this.key="backup.default.storage"}async add(t){if(!t.html.trim().length)return!1;const e=this.jodit.storage.get(this.key)||[];return e.find((e=>e.html===t.html))||(e.unshift(t),e.length>this.jodit.o.backup.limit&&(e.length=this.jodit.o.backup.limit),this.jodit.storage.set(this.key,e)),!1}items(){return Promise.resolve(this.jodit.storage.get(this.key)||[])}clear(){return this.jodit.storage.delete(this.key),Promise.resolve(!1)}}},21233(t,e,s){"use strict";s.d(e,{Y(){return r}});var o=s(31635),i=s(53557),n=s(65685),a=s(50638);let r=class t extends n.D{className(){return"UIBackupBox"}constructor(t){super(t),this.list=new a.n(this.j),this.preview=this.j.c.div(this.getFullElName("preview")),this.container.appendChild(this.list.container),this.container.appendChild(this.preview),this.list.container.classList.add(this.getFullElName("list")),t.e.on(this.list,"select",this.onSelectItem).on(this.list,"choose",this.onChooseItem)}build(t){this.preview.innerHTML="",this.list.build(t)}destruct(){return this.j.e.off(this.list,"select",this.onSelectItem),this.list.destruct(),super.destruct()}onSelectItem(t){this.latestSelected=t,this.preview.innerHTML=t.html||`<div class="${this.getFullElName("empty")}">${this.j.i18n("Empty")}</div>`}onChooseItem(t){this.j.e.fire(this,"choose",t)}chooseSelected(){this.onChooseItem(this.latestSelected)}};(0,o.Cg)([i.autobind],r.prototype,"onSelectItem",null),(0,o.Cg)([i.autobind],r.prototype,"onChooseItem",null),r=(0,o.Cg)([i.component],r)},9817(t,e,s){"use strict";s.d(e,{k(){return n}});var o=s(9596),i=s(76185);class n extends i.D${className(){return"UIBackupItem"}constructor(t,e){super(t),this.data=e,this.container.innerHTML=this.formatDate(e.created),(0,o.attr)(this.container,"tabIndex",0)}formatDate(t){const e=new Date,s=(0,o.isString)(t)?new Date(t):t,i=(e.getTime()-s.getTime())/1e3;return(0,o.isFunction)(this.j.o.backup.formatDate)?this.j.o.backup.formatDate(s):.2>i?this.j.i18n("Current"):60>i?this.j.i18n("Less minute"):i>3600?i>86400?`${s.toDateString()} ${s.toLocaleTimeString()}`:this.j.i18n("%s hours  ago",Math.floor(i/3600)):this.j.i18n("%s minutes ago",Math.floor(i/60))}focus(){this.container.focus()}}},50638(t,e,s){"use strict";s.d(e,{n(){return l}});var o=s(31635),i=s(67259),n=s(53557),a=s(9596),r=s(76185),c=s(9817);let l=class t extends r.Ue{className(){return"UIBackupList"}createContainer(t){const e=super.createContainer(t);return(0,a.attr)(e,"tabIndex","-1"),e}constructor(t){super(t),this.elements=[],this.currentSelection=-1,t.e.on(this.container,"keydown",(t=>{switch(t.key){case i.KEY_ENTER:t.preventDefault(),t.stopPropagation(),this.onChoose(this.currentSelection);break;case i.KEY_DOWN:this.selectNext();break;case i.KEY_UP:this.selectPrevious()}}))}build(t){this.clear(),t.forEach(((t,e)=>{const s=new c.k(this.jodit,t);this.append(s),this.j.e.on(s.container,"focus",(()=>this.onSelect(e))).on(s.container,"click",(()=>this.onSelect(e))).on(s.container,"dblclick",(()=>this.onChoose(e)))})),this.currentSelection=0,this.onChangeCurrentSelection(void 0,-1,0)}onChangeCurrentSelection(t,e,s){this.elements[e]?.setMod("active",!1),this.elements[s]?.setMod("active",!0),this.elements[s]?.focus(),this.j.e.fire(this,"select",this.elements[s].data)}onSelect(t){this.currentSelection=t}onChoose(t){this.j.e.fire(this,"choose",this.elements[t??this.currentSelection].data)}selectNext(){this.currentSelection+1>this.elements.length-1?this.currentSelection=0:this.currentSelection+=1}selectPrevious(){0>this.currentSelection-1?this.currentSelection=this.elements.length-1:this.currentSelection-=1}};(0,o.Cg)([(0,n.watch)("currentSelection")],l.prototype,"onChangeCurrentSelection",null),(0,o.Cg)([n.autobind],l.prototype,"onSelect",null),(0,o.Cg)([n.autobind],l.prototype,"onChoose",null),l=(0,o.Cg)([n.component],l)}},t=>t(t.s=67599)])}));