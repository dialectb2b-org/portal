/*!
 * jodit-pro - PRO Version of Jodit Editor
 * Author: Chupurnov Valeriy <chupurnov@gmail.com>
 * Version: v4.1.14
 * Url: https://xdsoft.net/jodit/pro/
 * License(s): SEE LICENSE IN LICENSE.md
 */


((t,e)=>{if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var i in s)("object"==typeof exports?exports:t)[i]=s[i]}})(self,(function(){return(self.webpackChunkjodit_pro=self.webpackChunkjodit_pro||[]).push([[916],{77109(t){t.exports='<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"> <path d="M365.4,59.628c60.56,0,109.6,49.03,109.6,109.47c0,109.47-109.6,171.8-219.06,281.271 C146.47,340.898,37,278.568,37,169.099c0-60.44,49.04-109.47,109.47-109.47c54.73,0,82.1,27.37,109.47,82.1 C283.3,86.999,310.67,59.628,365.4,59.628z"/> </svg>'},21838(t){t.exports='<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"> <path d="M28.7,16.3l-12-13c-0.4-0.4-1.1-0.4-1.5,0l-12,13C3,16.6,2.9,17,3.1,17.4C3.2,17.8,3.6,18,4,18h3v10c0,0.6,0.4,1,1,1h16 c0.6,0,1-0.4,1-1V18h3c0.4,0,0.8-0.2,0.9-0.6C29.1,17,29,16.6,28.7,16.3z"/> </svg>'},74516(t){t.exports='<svg viewBox="0 0 252 252" xmlns="http://www.w3.org/2000/svg"> <path d="M0 16C0 7.16344 7.16344 0 16 0H85.6364C86.5205 0 87.3797 0.29288 88.0796 0.832871L120.92 26.1671C121.62 26.7071 122.48 27 123.364 27H227C235.837 27 243 34.1634 243 43V132.335C243 134.779 240.234 136.198 238.25 134.772L233 131L226.5 127L220 124L212.5 122L202.5 120L189 120.5L179.5 122.5L170.5 125.5L161.5 130.5L157 133.5L153 137L146.5 144L141 152L137 160L134 168L132.5 178L132 183.5V189.5L133 197.5L135 205.5L137.5 211.5L139.524 214.996C141.068 217.663 139.144 221 136.062 221H16C7.16344 221 0 213.837 0 205V16Z"/> <circle cx="197" cy="185" r="56"/> <path d="M188.364 215.955V151.591H204.636V215.955H188.364ZM164.318 191.909V175.636H228.682V191.909H164.318Z" fill="white"/> </svg>'},57074(t,e,s){"use strict";s.d(e,{zc(){return i.z}});var i=s(28190);s(57001)},12027(t,e,s){"use strict";s.d(e,{Y(){return _}});var i=s(31635),o=s(67259),n=s(53557),r=s(9596),a=s(57074),h=s(35102),l=s(72923),c=s(24538),d=s(60485),u=(s(35647),s(43952)),m=s(52812),g=s(50203),p=s(479),v=s(69508),f=s(16706),w=s(45177),C=s(25788),y=s(91853),b=s(62933),S=s(91288),x=s(25511),I=s(96849);let _=class t extends l.lG{className(){return"FileBrowserPro"}lock(t="any"){return this.container.classList.add("jodit_disabled"),super.lock(t)}unlock(){return this.container.classList.remove("jodit_disabled"),super.unlock()}status(t,e=!(t instanceof Error)){(0,r.isAbort)(t)||(!o.IS_PROD&&(0,r.isString)(t),this.message.message((0,r.isString)(t)?t:t.message,e?"success":"error",this.options.howLongShowMsg))}get progressbar(){return new b.C(this,this.stateManager.state)}constructor(t){super((0,r.ConfigProto)(Object.assign(t||{},{resizable:!0,draggable:!0,toolbarButtons:t?.toolbarButtons||S.T.defaultOptions.filebrowser.buttons,buttons:x.A.atom(["filebrowser.settings","fullsize","dialog.close"])}),S.T.defaultOptions.filebrowser)),this.dataProvider=(0,c.S)(this,this.options),this.state=(0,h.observable)({onSelectCallBack:null,theme:"default",showSideBar:!0,showFavorites:!0,showSettings:!1,showPreview:!1,withFolders:!0,foldersPosition:"bottom",info:"",metaInfo:null,currentPath:"",currentSource:"",currentBaseUrl:"",tree:[],activeElements:[],favorites:[],progress:0,lastSelectedIndex:0,elements:[],messages:[],sources:[],view:"tiles",tileSize:"default",sortBy:"name-asc",filterWord:"",onlyImages:!1}),this.persistent=new v.L(this,this.state),this.loadingManager=new p.K(this,this.state),this.stateManager=new f.f(this.state),this.historyManager=new g.c(this,this.state),this.contextMenuManager=new u.I(this),this.header=new w.s(this,this.options,this.stateManager),this.panel=new y.D(this,this.stateManager),this.files=this.panel,this.tree=this.panel,I.q.make(this),!this.persistent.theme&&this.options.theme&&(this.persistent.theme=this.options.theme),this.panel.append(this.progressbar),this.toolbar.setMod("mode","header"),this.setSize(Math.min(this.options.width,screen.width),Math.min(this.options.height,screen.height)).setHeader(this.header),this.onResizeWindow(),this.initUploader(),this.onChangeTheme(),this.fullFillOptions(),this.dataProvider.onProgress((t=>{0===t&&(t=30),this.state.progress=t})),this.e.on("beforeClose",this.removeGlobalListeners),this.e.fire("afterInit"),x.A.prototype.afterInitHook.call(this)}addDisclaimer(t){this.dialog.appendChild(t)}async open(t=this.o.defaultCallback,e){return this.state.onlyImages=!!e,this.prepareOpening(t),super.open(this.panel.container),this.e.fire("update.filebrowser")}onResizeWindow(){(0,r.css)(this.dialog,{maxWidth:screen.width,minHeight:Math.min(this.options.height,screen.height),minWidth:Math.min(this.options.width,screen.width)})}onChangePath(){const{currentPath:t,currentSource:e}=this.state;this.uploader.setPath(t),this.uploader.setSource(e)}onChangeTheme(){this.setMod("theme",this.state.theme),this.header.setMod("theme",this.state.theme),this.panel.setMod("theme",this.state.theme),this.options.theme=this.state.theme}onToggleSettings(){this.state.showSettings=!this.state.showSettings}prepareOpening(t){this.registerGlobalListeners(),t&&(this.state.onSelectCallBack=e=>{this.close(),t(e)}),this.persistent.syncWithState()}registerGlobalListeners(){this.e.on(this.ow,"keydown",this.onKeyPress)}onKeyPress(t){const{activeElement:e}=this.od;if(!this.state.activeElements.length||!e||!h.Dom.isOrContains(this.panel.items.container,e))return;const s=this.state.elements;switch(t.key){case o.KEY_ENTER:return this.onChooseItems();case o.KEY_DELETE:return this.onFileRemove();case o.KEY_RIGHT:case o.KEY_LEFT:case o.KEY_DOWN:case o.KEY_UP:{const e=t.key===o.KEY_RIGHT||t.key===o.KEY_DOWN,i=this.state.lastSelectedIndex;let n;if([o.KEY_RIGHT,o.KEY_LEFT].includes(t.key))n=e?s[i+1]?i+1:0:s[i-1]?i-1:s.length-1;else{const{countInRow:t}=this.panel;n=Math.round(((i+1)/t+(e?1:-1))*t-1)}return s[n]&&this.stateManager.addActive(s[n],t.shiftKey),!1}}}removeGlobalListeners(){this.e.off(this.ow,"keydown",this.onKeyPress)}onFileRemove(){this.state.activeElements.length&&this.confirm("Are you sure?","Delete",(t=>{t&&this.__itemsRemove(this.state.activeElements)})).bindDestruct(this)}__itemsRemove(t){if(!t.length)return Promise.resolve();const e=[];return t.forEach((t=>{e.push("folder"===t.type?this.__folderRemove((0,m.y)(t.path),t.name??"",t.sourceName):this.__removeFile(t.file||t.name||"",t.sourceName))})),this.state.activeElements.forEach((t=>{this.stateManager.isFavorite(t)&&this.stateManager.toggleFavorite(t)})),this.state.activeElements=[],Promise.allSettled(e).then((()=>Promise.allSettled([this.loadingManager.loadItems(),this.loadingManager.loadFolders()])))}__removeFile(t,e){return this.dataProvider.fileRemove(this.state.currentPath,t,e).then((e=>{this.status(e||this.i18n('File "%s" was deleted',t),!0)})).catch(this.status)}__folderRemove(t,e,s){return this.dataProvider.folderRemove(t,e,s).then((i=>{this.status(i||this.i18n('Folder "%s" was deleted',e),!0),this.state.currentPath===t&&(this.state.currentPath=(0,m.y)(t),this.state.currentSource=s)})).catch(this.status)}onFileEdit(){if(1===this.state.activeElements.length){const[t]=this.state.activeElements;d.B.call(this,t.fileURL,t.file||"",t.path,t.sourceName,void 0,this.status)}}onFolderRename(t){this.prompt("Enter new name","Rename",(e=>{if(!(0,r.isValidName)(e)||e===t.name)return this.status(this.i18n("Enter new name")),!1;this.dataProvider.folderRename((0,m.y)(t.path),t.name,e,t.sourceName).then((s=>{this.state.activeElements=[],this.status(s,!0),this.state.currentPath=(0,m.y)(t.path)+"/"+e,this.state.currentSource=t.sourceName,this.historyManager.updateCurrent(),this.loadingManager.loadFolders()})).catch(this.status)}),this.i18n("type name"),t.name).bindDestruct(this)}onFolderRemove(t){this.confirm("Are you sure?","Delete",(e=>{e&&this.__itemsRemove([{type:"folder",name:t.name,path:t.path,sourceName:t.sourceName}])})).bindDestruct(this)}onFolderCreate(t){this.prompt("Enter Directory name","Create directory",(e=>{const s=t.path||"/";this.dataProvider.createFolder(e,t.path||"/",t.sourceName).then((()=>{this.state.currentSource===t.sourceName&&this.state.currentPath===s?this.e.fire("update.filebrowser"):(this.state.currentSource=t.sourceName,this.state.currentPath=s),this.historyManager.updateCurrent()}),this.status)}),this.i18n("type name")).bindDestruct(this)}onFileRename(t){const e=t.file||t.name||"";1===this.state.activeElements.length&&e&&this.prompt("Enter new name","Rename",(t=>{if(!(0,r.isValidName)(t))return this.status(this.i18n("Enter new name")),!1;this.dataProvider.fileRename(this.state.currentPath,e,t,this.state.currentSource).then((t=>{this.state.activeElements=[],this.status(t,!0),this.loadingManager.loadItems()})).catch(this.status)}),this.i18n("type name"),e).bindDestruct(this)}onChooseItems(){const t=this.stateManager.state.activeElements;if(t.length){if("folder"===t[0].type)return this.state.currentPath=this.state.currentPath+"/"+t[0].name,this.state.currentSource=t[0].sourceName,void this.e.fire("afterOpenFolder.filebrowser");this.state.onSelectCallBack?this.stateManager.callSelectHandler():this.onOpenLightBox(t[0])}}onOpenLightBox(t){C.c.open(this,t,this.state.elements)}initUploader(){const t=this,e=(0,r.ConfigProto)(t.o.uploader||{},S.T.defaultOptions.uploader),s=()=>this.loadingManager.loadItems();t.uploader=t.getInstance("Uploader",e),t.uploader.bind(t.panel.container,s,t.status),t.e.on("bindUploader.filebrowser",(e=>{t.uploader.bind(e,s,t.status)}))}destruct(){this.removeGlobalListeners(),this.header.destruct(),this.panel.destruct(),super.destruct()}fullFillOptions(){["getLocalFileByUrl","crop","resize","create","fileMove","folderMove","fileRename","folderRename","fileRemove","folderRemove","folder","items","permissions"].forEach((t=>{null!=this.options[t]&&(this.options[t]=(0,r.ConfigProto)(this.options[t],this.o.ajax))}))}};(0,i.Cg)([n.autobind],_.prototype,"status",null),(0,i.Cg)([n.cache],_.prototype,"progressbar",null),(0,i.Cg)([(0,n.watch)(":resize",{context:window})],_.prototype,"onResizeWindow",null),(0,i.Cg)([(0,n.watch)(["state.currentPath","state.currentSource"])],_.prototype,"onChangePath",null),(0,i.Cg)([(0,n.watch)("state.theme")],_.prototype,"onChangeTheme",null),(0,i.Cg)([(0,n.watch)(":toggleSettings.filebrowser")],_.prototype,"onToggleSettings",null),(0,i.Cg)([n.autobind],_.prototype,"onKeyPress",null),(0,i.Cg)([n.autobind],_.prototype,"removeGlobalListeners",null),(0,i.Cg)([(0,n.watch)(":fileRemove.filebrowser")],_.prototype,"onFileRemove",null),(0,i.Cg)([(0,n.watch)(":edit.filebrowser")],_.prototype,"onFileEdit",null),(0,i.Cg)([(0,n.watch)(":folderRename.filebrowser")],_.prototype,"onFolderRename",null),(0,i.Cg)([(0,n.watch)(":folderRemove.filebrowser")],_.prototype,"onFolderRemove",null),(0,i.Cg)([(0,n.watch)(":folderCreate.filebrowser")],_.prototype,"onFolderCreate",null),(0,i.Cg)([(0,n.watch)(":fileRename.filebrowser")],_.prototype,"onFileRename",null),(0,i.Cg)([(0,n.watch)(":select.filebrowser")],_.prototype,"onChooseItems",null),(0,i.Cg)([(0,n.watch)(":openLightBox.filebrowser")],_.prototype,"onOpenLightBox",null),_=(0,i.Cg)([n.component,(0,n.derive)(a.zc)],_),Object.defineProperty(x.A.modules,"FileBrowserPro",{value:_,writable:!1,enumerable:!0,configurable:!0})},37721(t,e,s){"use strict";var i=s(51431),o=s(91288);(0,i.JW)(s(31889));const n=o.T.prototype.controls.filebrowser;n.settings={icon:"settings",tooltip:"Settings",exec(t){(t.parent??t).e.fire("toggleSettings.filebrowser")}},n.home={icon:"home",tooltip:"Home",exec(t){t.e.fire("goHome.filebrowser")}},n.preview={icon:"eye",tooltip:"Preview",isDisabled:t=>0===t.state.activeElements.length,exec(t){t.e.fire("togglePreview.filebrowser")}},n.next={icon:"angle-right",tooltip:"History next",isDisabled(t){return!t.historyManager.canNext()},exec(t){t.historyManager.next()}},n.previous={icon:"angle-left",tooltip:"History previous",isDisabled(t){return!t.historyManager.canPrevious()},exec(t){t.historyManager.previous()}},n["new-folder"]={icon:"new-folder",exec(t){t.e.fire("folderCreate.filebrowser",{path:t.state.currentPath,sourceName:t.state.currentSource})},tooltip:"New folder"},Object.assign(o.T.prototype.filebrowser,{buttons:["filebrowser.home","filebrowser.previous","filebrowser.next","|","filebrowser.upload","filebrowser.new-folder","filebrowser.remove","filebrowser.update","filebrowser.select","filebrowser.edit","|","filebrowser.preview","about"],sort:!1,pixelOffsetLoadNewChunk:300,width:800,height:400,previewOfficeURL:"https://view.officeapps.live.com/op/view.aspx?src="})},50267(t,e,s){"use strict";s.r(e),s.d(e,{finder(){return r}});var i=s(65564),o=(s(37721),s(12027)),n=s(25511);class r extends i.k{constructor(){super(...arguments),this.hasStyle=!n.A.fatMode}afterInit(t){t.e.on("getInstanceFileBrowser",(t=>(this.__instance||(this.__instance=new o.Y(t)),this.__instance)))}beforeDestruct(t){t.e.off("getInstanceFileBrowser"),this.__instance?.destruct()}}r.requires=["license"],n.A.plugins.add("finder",r)},43952(t,e,s){"use strict";s.d(e,{I(){return a}});var i=s(31635),o=s(89099),n=s(53557),r=s(24538);let a=class t extends o.v{className(){return"ContextMenuManager"}onFolderContext(t,e){return this.buildContextItemMenu(this.getFolderContextActions(t),e),!1}onItemContext(t,e,s){return this.buildContextItemMenu(this.getItemContextActions(t),s),!1}onSourceContext(t,e){return this.buildContextItemMenu(this.getSourceContextActions(t),e),!1}buildContextItemMenu(t,e){if(!this.j.o.contextMenu)return;const s=(0,r.V)(this.j).setMod("theme",this.j.state.theme);s.show(e.clientX,e.clientY,t.filter((t=>t&&!1!==t.enabled))),this.j.e.on(this.j,"afterClose",(()=>{s.isOpened&&s.close()}))}getItemContextActions(t){if(this.j.stateManager.isActive(t)||this.j.stateManager.addActive(t,this.j.state.activeElements.length>1),"folder"===t.type)return this.getFolderContextActions({type:"directory",children:[],name:t.name||"",path:t.path,sourceName:t.sourceName});const e=this.j.options,s=this.j.dataProvider,i=1===this.j.state.activeElements.length;return[{icon:"pencil",title:"Edit",enabled:!!t.isImage&&e.editImage&&i&&(s.canI("ImageResize")||s.canI("ImageCrop")),exec:()=>{this.j.e.fire("edit.filebrowser")}},{icon:"italic",title:"Rename",enabled:s.canI("FileRename")&&i,exec:()=>this.j.e.fire("fileRename.filebrowser",t)},{icon:"bin",title:"Delete",enabled:s.canI("FileRemove"),exec:()=>this.j.e.fire("fileRemove.filebrowser",t)},{icon:"eye",title:"Preview",enabled:!(!t.isImage&&"file"!==t.type)&&e.preview&&i,exec:()=>this.j.e.fire("openLightBox.filebrowser",t)},{icon:"upload",title:"Download",exec:()=>{t.fileURL&&this.j.ow.open(t.fileURL)}}]}getFolderContextActions(t){const e=this.j.dataProvider;return[{icon:"pencil",title:"Rename",exec:()=>{this.j.e.fire("folderRename.filebrowser",t)},enabled:e.canI("FolderRename")},{icon:"bin",title:"Delete",exec:()=>{this.j.e.fire("folderRemove.filebrowser",t)},enabled:e.canI("FolderRemove")},{icon:"plus",title:"Add folder",exec:()=>{this.j.e.fire("folderCreate.filebrowser",t)},enabled:e.canI("FolderCreate")}]}getSourceContextActions(t){return[{icon:"plus",title:"Create folder",exec:()=>{this.j.e.fire("folderCreate.filebrowser",t)}}]}};(0,i.Cg)([(0,n.watch)(":contextmenuFolder.filebrowser")],a.prototype,"onFolderContext",null),(0,i.Cg)([(0,n.watch)(":contextmenuItem.filebrowser")],a.prototype,"onItemContext",null),(0,i.Cg)([(0,n.watch)(":contextmenuSource.filebrowser")],a.prototype,"onSourceContext",null),a=(0,i.Cg)([n.component],a)},52812(t,e,s){"use strict";s.d(e,{y(){return i}});const i=t=>{const e=t.split("/").filter((t=>t.length));return e.pop(),e.join("/")||"/"}},50203(t,e,s){"use strict";s.d(e,{c(){return a}});var i=s(31635),o=s(89099),n=s(53557),r=s(20368);let a=class t extends o.v{className(){return"HistoryManager"}constructor(t,e){super(t),this.state=e,this.history=[],this.historyIndex=0}canNext(){return this.history.length-1>this.historyIndex}canPrevious(){return this.historyIndex>0}push(t){let{historyIndex:e}=this;const s=this.history[e];if(s&&s.currentSource===t.currentSource&&s.currentPath===t.currentPath)return;let i=[...this.history];i.length-1!==e&&(i=i.slice(0,e+1)),i.push(t),s&&(e+=1),this.history=i,this.historyIndex=e}next(){this.canNext()&&(this.historyIndex+=1,this.updateState())}previous(){this.canPrevious()&&(this.historyIndex-=1,this.updateState())}updateCurrent(){this.history[this.historyIndex]={currentSource:this.state.currentSource,currentPath:this.state.currentPath,tree:(0,r.y6)(this.state.tree),elements:[...this.state.elements]}}onHome(){this.state.currentPath="",this.state.currentSource="",this.j.e.fire("afterOpenFolder.filebrowser update.filebrowser")}onOpenFolder(){this.push({tree:[],elements:[],currentPath:this.state.currentPath,currentSource:this.state.currentSource}),this.j.e.fire("changeSelection")}updateState(){const{tree:t,elements:e,currentSource:s,currentPath:i}=this.history[this.historyIndex];this.state.activeElements=[],this.state.elements=[...e],this.state.tree=[...t],this.state.currentSource=s,this.state.currentPath=i,this.j.e.fire("changeSelection")}};(0,i.Cg)([(0,n.watch)(["state.elements","state.tree"])],a.prototype,"updateCurrent",null),(0,i.Cg)([(0,n.watch)(":goHome.filebrowser")],a.prototype,"onHome",null),(0,i.Cg)([(0,n.watch)(":afterOpenFolder.filebrowser")],a.prototype,"onOpenFolder",null),a=(0,i.Cg)([n.component],a)},479(t,e,s){"use strict";s.d(e,{K(){return r}});var i=s(31635),o=s(79834),n=s(53557);let r=class t extends o.vG{className(){return"LoadingManager"}constructor(t,e){super(t),this.state=e,this.__tick=0,this.offset=0,this.countInOneChunk=20,this.stopLoadingParts=!1,this.__isLoadingPart=!1,this.__callQueueCount=0}async onUpdateFileBrowser(){this.state.activeElements=[],this.j.panel.setMod("loading",!0),await Promise.all([this.loadFolders(),this.loadItems()]),this.j.panel.setMod("loading",!1)}async loadFolders(){if(!this.j.isOpened)return;const{currentPath:t,currentSource:e}=this.state;try{const s=await this.j.dataProvider.tree(t,e);this.j.stateManager.fillTreeForPath(s,t),this.state.sources=s}catch(t){this.j.status(t)}}async loadItems(){if(this.j.isOpened)try{this.__tick+=1;const{__tick:t}=this;this.offset=0,this.stopLoadingParts=!1,this.__callQueueCount=0;const{items:e,loadedTotal:s}=await a(this.state,this.j.dataProvider,this.offset,this.countInOneChunk);if(this.state.elements=e,this.stopLoadingParts=this.countInOneChunk>s,await this.loadItemsChunk(t),await this.async.requestIdlePromise(),this.__tick!==t)return;for(;!this.stopLoadingParts&&this.j.panel.countInColumn*this.j.panel.countInRow>=this.state.elements.length;)if(await this.loadItemsChunk(t),this.__tick!==t)return}catch(t){this.j.status(t)}}async __loadItemsChunk(t){if(this.__isLoadingPart)this.__callQueueCount+=1;else{if(!this.stopLoadingParts){this.__isLoadingPart=!0,this.j.panel.items.setMod("chunk-loading",!0);try{this.offset+=this.countInOneChunk;const{items:e,loadedTotal:s}=await a(this.state,this.j.dataProvider,this.offset,this.countInOneChunk);if(this.__tick!==t)return;this.stopLoadingParts=this.countInOneChunk>s,e.length&&(this.state.elements=this.state.elements.concat(e))}catch(t){this.j.status(t)}return this.j.panel.items.setMod("chunk-loading",!1),this.__isLoadingPart=!1,this.__callQueueCount>0?(this.__callQueueCount-=1,this.__loadItemsChunk(t)):void 0}this.__callQueueCount=0}}loadItemsChunk(t=this.__tick){return t!==this.__tick?Promise.resolve():this.__loadItemsChunk(t)}};function a(t,e,s,i){const{currentPath:o,currentSource:n,sortBy:r,withFolders:a,foldersPosition:h,onlyImages:l,filterWord:c}=t;return e.itemsEx(o,n,{offset:s,limit:i,sortBy:r,withFolders:a,foldersPosition:h,onlyImages:l,filterWord:c})}(0,i.Cg)([(0,n.watch)(":update.filebrowser")],r.prototype,"onUpdateFileBrowser",null),(0,i.Cg)([(0,n.watch)(["state.currentPath","state.currentSource"]),(0,n.debounce)((t=>({timeout:t.defaultTimeout,promisify:!0})))],r.prototype,"loadFolders",null),(0,i.Cg)([(0,n.watch)(["state.currentPath","state.currentSource","state.sortBy","state.onlyImages","state.foldersPosition","state.filterWord"]),(0,n.debounce)((t=>({timeout:t.defaultTimeout,promisify:!0})))],r.prototype,"loadItems",null),(0,i.Cg)([(0,n.debounce)((t=>({timeout:t.defaultTimeout,promisify:!0})))],r.prototype,"loadItemsChunk",null),r=(0,i.Cg)([n.component],r)},69508(t,e,s){"use strict";s.d(e,{L(){return a}});var i=s(31635),o=s(79834),n=s(53557),r=s(46366);let a=class t extends o.vG{className(){return"PersistentStore"}constructor(t,e){super(t),this.state=e,this.sortBy="changed-desc",this.view="tiles",this.foldersPosition="top",this.tileSize="default",this.favorites=[],this.showSideBar=!0,this.showPreview=!1,this.showFavorites=!0}onChangeThemeSetField(){this.theme=this.state.theme}onChangeView(){this.view=this.state.view}onChangeSortBy(){this.sortBy=this.state.sortBy}onChangeTileSize(){this.tileSize=this.state.tileSize}onChangeFavorites(){this.favorites=this.state.favorites}onChangeShowSideBar(){this.showSideBar=this.state.showSideBar}onChangeShowPreview(){this.showPreview=this.state.showPreview}onChangeShowFavorites(){this.showFavorites=this.state.showFavorites}onChangeFoldersPosition(){this.foldersPosition=this.state.foldersPosition}syncWithState(){this.state.tileSize=this.tileSize,this.state.favorites=this.favorites.map((t=>t instanceof r.u?t:r.u.create(t))),this.state.view=this.view,this.state.theme=this.theme,this.state.showSideBar=this.showSideBar,this.state.showPreview=this.showPreview,this.state.showFavorites=this.showFavorites,this.state.sortBy=this.sortBy,this.state.foldersPosition=this.foldersPosition}};(0,i.Cg)([n.persistent],a.prototype,"theme",void 0),(0,i.Cg)([n.persistent],a.prototype,"sortBy",void 0),(0,i.Cg)([n.persistent],a.prototype,"view",void 0),(0,i.Cg)([n.persistent],a.prototype,"foldersPosition",void 0),(0,i.Cg)([n.persistent],a.prototype,"tileSize",void 0),(0,i.Cg)([n.persistent],a.prototype,"favorites",void 0),(0,i.Cg)([n.persistent],a.prototype,"showSideBar",void 0),(0,i.Cg)([n.persistent],a.prototype,"showPreview",void 0),(0,i.Cg)([n.persistent],a.prototype,"showFavorites",void 0),(0,i.Cg)([(0,n.watch)("state.theme")],a.prototype,"onChangeThemeSetField",null),(0,i.Cg)([(0,n.watch)("state.view")],a.prototype,"onChangeView",null),(0,i.Cg)([(0,n.watch)("state.sortBy")],a.prototype,"onChangeSortBy",null),(0,i.Cg)([(0,n.watch)("state.tileSize")],a.prototype,"onChangeTileSize",null),(0,i.Cg)([(0,n.watch)("state.favorites")],a.prototype,"onChangeFavorites",null),(0,i.Cg)([(0,n.watch)("state.showSideBar")],a.prototype,"onChangeShowSideBar",null),(0,i.Cg)([(0,n.watch)("state.showPreview")],a.prototype,"onChangeShowPreview",null),(0,i.Cg)([(0,n.watch)("state.showFavorites")],a.prototype,"onChangeShowFavorites",null),(0,i.Cg)([(0,n.watch)("state.foldersPosition")],a.prototype,"onChangeFoldersPosition",null),a=(0,i.Cg)([n.component],a)},16706(t,e,s){"use strict";s.d(e,{f(){return n}});var i=s(31635),o=s(53557);class n{constructor(t){this.state=t}getIndex(t,e=this.state.elements){return e.findIndex((e=>e.uniqueHashKey===t.uniqueHashKey))}isActive(t){return!!this.state.activeElements.find((e=>e.uniqueHashKey===t.uniqueHashKey))}isFavorite(t){return!!this.state.favorites.find((e=>e.uniqueHashKey===t.uniqueHashKey))}addActive(t,e){this.state.metaInfo=t,this.state.info=t.file??"",this.state.lastSelectedIndex=this.getIndex(t),this.state.activeElements=e?[...this.state.activeElements,t]:[t]}callSelectHandler(){const t=this.state.activeElements;this.state.onSelectCallBack?.call(this,{baseurl:"",files:t.map((t=>t.fileURL)),isImages:t.map((t=>!!t.isImage))})}setFilter(t){this.state.filterWord=t}toggleFavorite(t){const e=this.getIndex(t,this.state.favorites),s=[...this.state.favorites];-1===e?s.push(t):s.splice(e,1),this.state.favorites=s}fillTreeForPath(t,e){this.state.tree.length&&e&&"/"!==e?(this.removeActive(this.state.tree),t.forEach((t=>{let s=r(this.state.tree,t.name);s||(s=h(t),this.state.tree.push(s)),s.isActive=!0;const i=((t,e)=>t.split("/").reduce(((t,e)=>t&&r(t.children,e)),e))(e,s);i&&(i.isActive=!0,i.children=a(t.folders).map((s=>l(s,e+"/"+s,t.name))))})),this.state.tree=[...this.state.tree]):this.state.tree=t.map(h)}removeActive(t){t.forEach((t=>{t.isActive=!1,this.removeActive(t.children)}))}get isFavoriteItems(){return this.state.favorites===this.state.elements}}function r(t,e){return t.find((t=>t.name===e))??null}function a(t){return t.filter((t=>"."!==t&&".."!==t))}function h(t){return{type:"source",name:t.name,title:t.title,sourceName:t.name,path:"/",children:a(t.folders).map((e=>l(e,e,t.name)))}}function l(t,e,s){return{type:"directory",name:t,path:e,sourceName:s,children:[]}}(0,i.Cg)([o.autobind],n.prototype,"getIndex",null),(0,i.Cg)([o.autobind],n.prototype,"isActive",null),(0,i.Cg)([o.autobind],n.prototype,"isFavorite",null)},31889(t,e,s){"use strict";s.r(e),s.d(e,{ru(){return i}});const i=s(18226)},18226(t){"use strict";t.exports={Favorites:"Избранное",Settings:"Настройки",Light:"Светлая",Dark:"Темная",Theme:"Тема",Show:"Показать",Hide:"Скрыть","Show favorites":"Показывать избранное",Tiles:"Плитка",List:"Список",Compact:"Компактный",View:"Отображение","Folders position":"Позиция папок","Sort by":"Сортировать по","Extra small":"Очень маленькие",Small:"Маленькие",Large:"Большие","Extra large":"Очень большие","Tile size":"Размер плитки"}},35647(t,e,s){"use strict";var i=s(76185),o=s(77109),n=s(21838),r=s(74516);i.In.set("heart",o+""),i.In.set("home",n+""),i.In.set("new-folder",r+"")},11039(t,e,s){"use strict";s.d(e,{R(){return r}});var i=s(31635),o=s(12222),n=(s(28712),s(76185));let r=class t extends n.D${className(){return"UIBrowserFolder"}render(){return'<div>\n\t\t\t<div class="&__icon">\n\t\t\t\t<div class=\'&__loader\'></div>\n\t\t\t\t<div class="&__icon-wrapper">\n\t\t\t\t\t*folder*\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="&__name"></div>\n\t\t\t<div class="&__arrow">*angle-right*</div>\n\t\t</div>'}constructor(t,e){super(t),this.item=e,this.syncMod=!0,this.getElm("name").innerText=e.name,t.e.on(this.container,"click",(()=>(this.getMod("active")||this.setMod("loading",!0),t.e.fire("openFolder",e)))).on(this.container,"contextmenu",(s=>t.e.fire("contextmenuFolder.filebrowser",e,s)))}};r=(0,i.Cg)([o.s],r)},45177(t,e,s){"use strict";s.d(e,{s(){return h}});var i=s(31635),o=s(53557),n=s(26986),r=s(76185),a=s(78072);let h=class t extends r.Ue{className(){return"UIBrowserHeader"}constructor(t,e,s){super(t),this.options=e,this.stateManager=s,this.syncMod=!0,this.toolbar=(0,a.$K)(this.j),this.filter=new r.tS(this.j,{icon:"search",placeholder:"Filter",clearButton:!0,onChange:t=>{this.stateManager.setFilter(t)}}),this.append(this.toolbar).append(this.filter),this.filter.container.classList.add(this.getFullElName("filter")),this.toolbar.setMod("mode","header").build(this.__getButtons())}__getButtons(){return(this.options.toolbarButtons??[]).filter((t=>{if(!(0,n.K)(t))return!0;switch(t){case"filebrowser.edit":return this.j.dataProvider.canI("ImageResize")||this.j.dataProvider.canI("ImageCrop");case"filebrowser.new-folder":return this.j.dataProvider.canI("FolderCreate");case"filebrowser.upload":return this.j.dataProvider.canI("FileUpload");case"filebrowser.remove":return this.j.dataProvider.canI("FileRemove")}return!0}))}};h=(0,i.Cg)([o.component],h)},72893(t,e,s){"use strict";s.d(e,{Q(){return l}});var i=s(31635),o=s(53557),n=s(9596),r=(s(28712),s(76185)),a=s(35102),h=s(46366);let l=class t extends r.D${className(){return"UIBrowserItem"}constructor(t,e){super(t),this.item=h.u.create(e),t.e.on(this.container,"click contextmenu dblclick",(e=>(t.e.fire(e.type+"Item.filebrowser",this.item,(0,n.ctrlKey)(e)||e.shiftKey,e),!1))),this.update()}render(){return"<div tabindex='-1'>\n\t\t\t<div class='&__image'></div>\n\t\t\t<div class='&__info'></div>\n\t\t\t<div class='&__heart'>*heart*</div>\n\t\t</div>"}onClickFavorite(){return this.bubble((t=>{this.jodit.e.fire(t,"toggleFavoriteItem",this.item)})),!1}onAction(t){return this.jodit.e.fire(t.type+"Item.filebrowser",this.item,(0,n.ctrlKey)(t)||t.shiftKey,t),!1}update(){const t=this.getElm("image");(0,n.css)(t,"backgroundImage",`url(${encodeURI(this.item.imageURL)})`);const{type:e,file:s,time:i,size:o}=this.item;this.setMod("is-file",!1===this.item.isImage).setMod("type",e??"file").setElementValue("name",s).setElementValue("time",i).setElementValue("filesize",o),(0,n.attr)(this.container,"title","folder"!==e?`${s} ${i} ${o}`:s),super.update()}setElementValue(t,e){const s=this.getFullElName(t);let i=this.getElm(t);if(!e)return i&&a.Dom.safeRemove(i),this;if(!i){const t=this.getElm("info");i=this.j.create.div(s),t.appendChild(i)}return i.innerText=e,this}};(0,i.Cg)([(0,o.watch)("heart:click")],l.prototype,"onClickFavorite",null),(0,i.Cg)([(0,o.watch)(["container:click","container:contextmenu","container:dblclick"])],l.prototype,"onAction",null),l=(0,i.Cg)([o.component],l)},25788(t,e,s){"use strict";s.d(e,{c(){return l}});var i,o=s(31635),n=s(67259),r=s(53557),a=s(9596),h=(s(28712),s(35102));let l=i=class t extends h.UIElement{className(){return"UILightBox"}render(){return"<div>\n\t\t\t<div class='&__previous'>*angle-left*</div>\n\t\t\t<div class='&__preview'></div>\n\t\t\t<div class='&__loader'></div>\n\t\t\t<div class='&__next'>*angle-right*</div>\n\t\t</div>"}constructor(t,e,s){super(t),this.current=e,this.elements=s,this.dialog=new h.Dialog;const{dialog:i}=this;i.setMod("theme",t.state.theme).toolbar.setMod("mode","header"),i.open(this),this.elements=this.elements.filter((t=>t.isImage)),i.e.on(i,"afterClose",(()=>{this.destruct()})),this.addGlobalListeners(),this.onChangeCurrent(),i.toolbar.build([{icon:"check",exec:()=>{t.stateManager.addActive(this.current,!1),t.e.fire("select.filebrowser"),i.close()}},"dialog.close"])}async onChangeCurrent(){const{current:t}=this;this.setMod("loading",!0);const e=this.getElm("preview");if(h.Dom.detach(e),(0,a.css)(e,{backgroundImage:null}),t.isImage){const s=await(0,a.loadImage)(t.fileURL,this.j);this.dialog.setPosition(),(0,a.css)(e,{width:Math.min(this.jodit.ow.innerWidth,s.naturalWidth),height:Math.min(this.jodit.ow.innerHeight-100,s.naturalHeight),backgroundImage:`url(${s.src})`})}else{const s=await this.makeIframe(t.fileURL);e.appendChild(s)}this.dialog.setSize(),this.dialog.setPosition(),this.setMod("loading",!1)}makeIframe(t){const e=this.j.c.element("iframe");return e.classList.add(this.getFullElName("office-iframe")),e.src=/\.pdf/.test(t)?t:this.j.o.previewOfficeURL+encodeURIComponent(t),e}onPreviousClick(){const{current:t}=this;let e=this.j.stateManager.getIndex(t,this.elements);e>0?e-=1:e=this.elements.length-1,this.current=this.elements[e]}onNextClick(){const{current:t}=this;let e=this.j.stateManager.getIndex(t,this.elements);this.elements.length-1>e?e+=1:e=0,this.current=this.elements[e]}static open(t,e,s){return new i(t,e,s)}addGlobalListeners(){this.j.e.on(this.j.od,"keydown",this.onKeyPress)}onKeyPress(t){if(t.key===n.KEY_LEFT||t.key===n.KEY_RIGHT||t.key===n.KEY_SPACE)return t.key===n.KEY_LEFT?this.onPreviousClick():this.onNextClick(),!1}removeGlobalListeners(){this.j.e.off(this.j.od,"keydown",this.onKeyPress)}destruct(){return this.removeGlobalListeners(),this.dialog.destruct(),super.destruct()}};(0,o.Cg)([(0,r.watch)("current")],l.prototype,"onChangeCurrent",null),(0,o.Cg)([(0,r.watch)("previous:click")],l.prototype,"onPreviousClick",null),(0,o.Cg)([(0,r.watch)("next:click")],l.prototype,"onNextClick",null),(0,o.Cg)([r.autobind],l.prototype,"onKeyPress",null),l=i=(0,o.Cg)([r.component],l)},91853(t,e,s){"use strict";s.d(e,{D(){return m}});var i=s(31635),o=s(53557),n=s(9596),r=s(76185),a=s(99485),h=s(96793),l=s(4858),c=s(73101),d=s(95833),u=s(36941);let m=class t extends r.Ue{className(){return"UIBrowserPanel"}get countInRow(){if("list"===this.state.view)return 1;if(!this.items.elements.length)return 1;const{container:t}=this.items.elements[0],e=(0,n.css)(t,"marginLeft");return Math.floor(this.items.container.offsetWidth/(t.offsetWidth+((0,n.isNumber)(e)?e:0)))}get countInColumn(){if(!this.items.elements.length)return 1;const{container:t}=this.items.elements[0],e=(0,n.css)(t,"marginTop");return Math.floor(this.items.container.offsetHeight/(t.offsetHeight+((0,n.isNumber)(e)?e:0)))}render(){return"<div>\n\t\t\t<div class='&__content'></div>\n\t\t\t<div class='&__footer'></div>\n\t\t</div>"}constructor(t,e){super(t),this.stateManager=e,this.syncMod=!0,this.sources=new c.T(this.j),this.sidebar=new l.H(this.jodit,[this.sources],this.stateManager.state),this.preview=new a.T(this.jodit,this.stateManager.state),this.statusbar=new d.E(this.j),this.items=new u.T(this.j,this.stateManager),this.settings=new h.K(this.jodit,this.stateManager.state),this.state=e.state,this.append(this.sidebar,"content"),this.append(this.items,"content"),this.append(this.settings,"content"),this.append(this.preview,"content"),this.append(this.statusbar,"footer"),this.onChangeElements(),this.onChangeSources(),this.onChangeView(),this.onChangeTileSize(),this.onChangeShowFavorites(),this.onChangeActiveElements(),this.onChangeFavorites(),this.onChangeShowSideBar(),this.onChangeShowSettings(),this.onChangeShowPreview(),this.onChangeTheme()}onChangeTheme(){this.setMod("theme",this.stateManager.state.theme)}onChangeElements(){this.items.build(this.stateManager.state.elements)}onChangeActiveElements(){this.state.activeElements.length||(this.state.info="",this.state.metaInfo=null),this.items.elements.forEach((t=>{t.setMod("active",!!this.stateManager.isActive(t.item))})),this.j.e.fire("changeSelection")}onChangeFavorites(){this.items.elements.forEach((t=>{t.setMod("favorite",!!this.stateManager.isFavorite(t.item))}))}onChangeSources(){this.sources.build(this.stateManager.state.tree)}onChangeLastSelectedIndex(){const t=this.items.elements[this.stateManager.state.lastSelectedIndex]?.container;t&&((0,n.scrollIntoViewIfNeeded)(t,this.items.container,this.j.od),t.focus())}onChangeInfo(){this.statusbar.value(this.state.info,"center")}onChangePathOrSource(){this.statusbar.value(this.state.currentPath?`${this.state.currentPath} (${this.state.currentSource})`:this.i18n("Home"),"left")}onChangeShowSettings(){this.settings.setMod("hidden",!this.stateManager.state.showSettings)}onChangeShowPreview(){this.preview.setMod("hidden",!this.stateManager.state.showPreview)}onChangeShowSideBar(){this.sidebar.setMod("hidden",!this.stateManager.state.showSideBar)}onChangeView(){this.items.setMod("view",this.stateManager.state.view)}onChangeTileSize(){this.items.setMod("size",this.stateManager.state.tileSize)}onChangeShowFavorites(){this.sidebar.setMod("show-favorites",this.stateManager.state.showFavorites),this.items.setMod("show-favorites",this.stateManager.state.showFavorites)}onItemDblClick(){return this.j.e.fire("select.filebrowser"),!1}onItemClick(t,e){this.stateManager.addActive(t,e)}onTogglePreview(){return this.state.showPreview=!this.state.showPreview,!1}onToggleFavoriteItem(t){this.stateManager.toggleFavorite(t)}onFolderClick(t){this.stateManager.state.currentSource=t.sourceName,this.stateManager.state.currentPath=t.path||"/",this.j.e.fire("afterOpenFolder.filebrowser")}};(0,i.Cg)([(0,o.watch)("state.theme")],m.prototype,"onChangeTheme",null),(0,i.Cg)([(0,o.watch)("state.elements")],m.prototype,"onChangeElements",null),(0,i.Cg)([(0,o.watch)("state.activeElements")],m.prototype,"onChangeActiveElements",null),(0,i.Cg)([(0,o.watch)(["state.favorites","state.elements"])],m.prototype,"onChangeFavorites",null),(0,i.Cg)([(0,o.watch)("state.sources")],m.prototype,"onChangeSources",null),(0,i.Cg)([(0,o.watch)("state.lastSelectedIndex")],m.prototype,"onChangeLastSelectedIndex",null),(0,i.Cg)([(0,o.watch)("state.info")],m.prototype,"onChangeInfo",null),(0,i.Cg)([(0,o.watch)(["state.currentPath","state.currentSource"])],m.prototype,"onChangePathOrSource",null),(0,i.Cg)([(0,o.watch)("state.showSettings")],m.prototype,"onChangeShowSettings",null),(0,i.Cg)([(0,o.watch)("state.showPreview")],m.prototype,"onChangeShowPreview",null),(0,i.Cg)([(0,o.watch)("state.showSideBar")],m.prototype,"onChangeShowSideBar",null),(0,i.Cg)([(0,o.watch)("state.view")],m.prototype,"onChangeView",null),(0,i.Cg)([(0,o.watch)("state.tileSize")],m.prototype,"onChangeTileSize",null),(0,i.Cg)([(0,o.watch)("state.showFavorites")],m.prototype,"onChangeShowFavorites",null),(0,i.Cg)([(0,o.watch)(":dblclickItem.filebrowser")],m.prototype,"onItemDblClick",null),(0,i.Cg)([(0,o.watch)(":clickItem.filebrowser")],m.prototype,"onItemClick",null),(0,i.Cg)([(0,o.watch)(":togglePreview.filebrowser")],m.prototype,"onTogglePreview",null),(0,i.Cg)([(0,o.watch)(":toggleFavoriteItem")],m.prototype,"onToggleFavoriteItem",null),(0,i.Cg)([(0,o.watch)(":openFolder")],m.prototype,"onFolderClick",null),m=(0,i.Cg)([o.component],m)},99485(t,e,s){"use strict";s.d(e,{T(){return c}});var i=s(31635),o=s(53557),n=s(23545),r=s(71122),a=(s(28712),s(1530)),h=s(72893),l=s(35590);let c=class t extends a.U{className(){return"UIPreview"}addResize(){l.Z.remove(this),l.Z.install(this,screen.width>450?"left":"top")}render(){return'<div>\n\t\t\t\t<div class="&__image"></div>\n\t\t\t\t<div class="&__info"></div>\n\t\t\t\t<div class="&__loader"></div>\n\t\t\t\t<div class="&__empty-message">~Select image~</div>\n\t\t\t</div>'}constructor(t,e){super(t),this.state=e,this.lastLoadPromise=null,this.onChangeMetaInfo()}afterSetMod(t,e){"hidden"===t&&!1===e&&this.onChangeMetaInfo(),super.afterSetMod(t,e)}onChangeMetaInfo(){if(this.getMod("hidden"))return;const{metaInfo:t}=this.state;this.setMod("empty",!t);const e=this.getElm("info");n.J.detach(e);const s=this.getElm("image");(0,r.css)(s,{backgroundImage:null}),t&&(this.setMod("is-file",!1===t.isImage).setMod("type",t.type??"file"),h.Q.prototype.setElementValue.call(this,"name",t.file),h.Q.prototype.setElementValue.call(this,"time",t.time),h.Q.prototype.setElementValue.call(this,"filesize",t.size),this.setMod("loading",!0),this.lastLoadPromise?.rejectCallback(),this.lastLoadPromise=(0,r.loadImage)(t.isImage?t.fileURL:t.imageURL,this.j),this.lastLoadPromise.then((t=>{const e=this.getElm("image");t&&(0,r.css)(e,{backgroundImage:`url(${t.src})`})})).finally((()=>{this.setMod("loading",!1)})).catch((()=>{})))}};(0,i.Cg)([(0,o.hook)("ready"),(0,o.watch)(":resize",{context:window}),(0,o.debounce)()],c.prototype,"addResize",null),(0,i.Cg)([(0,o.watch)("state.metaInfo")],c.prototype,"onChangeMetaInfo",null),c=(0,i.Cg)([o.component],c)},62933(t,e,s){"use strict";s.d(e,{C(){return r}});var i=s(31635),o=s(53557),n=s(3370);let r=class t extends n.z{className(){return"UIProgress"}constructor(t,e){super(t),this.state=e,this.onProgress()}onProgress(){this.state.progress?this.show():this.hide(),this.progress(this.state.progress)}hide(){return this.setMod("hidden",!0),this}progress(t){return this.container.style.width=t.toFixed(2)+"%",98>t||this.j.async.setTimeout((()=>{this.hide()}),{label:"progress",timeout:300}),this}show(){return this.setMod("hidden",!1),this}};(0,i.Cg)([(0,o.watch)("state.progress")],r.prototype,"onProgress",null),r=(0,i.Cg)([o.component],r)},96793(t,e,s){"use strict";s.d(e,{K(){return r}});var i=s(31635),o=s(53557),n=(s(28712),s(76185));let r=class t extends n.Ue{className(){return"UIBrowserSettings"}render(){return`<div>\n\t\t\t<div class="${this.getFullElName("close")}">${n.In.get("cancel")}</div>\n\t\t\t<div class="${this.getFullElName("title")}">${this.j.i18n("Settings")}</div>\n\t\t\t<div class="${this.getFullElName("options")}"></div>\n\t\t</div>`}appendChildToContainer(t){this.getElm("options").appendChild(t)}afterSetMod(t,e){"hidden"===t&&!1===e&&this.generateSettings(),super.afterSetMod(t,e)}constructor(t,e){super(t),this.state=e;const s=this.getElm("close");t.e.on(s,"click",(()=>{this.state.showSettings=!1}))}onChangeView(){const t=this.getElm("tile-size");t&&(t.style.display="tiles"===this.state.view?"block":"none")}generateSettings(){this.clear();const{j:t}=this;this.append([new n.ss(t,{label:"Theme",name:"theme",value:this.state.theme,radio:!0,options:[{value:"default",text:"Light"},{value:"dark",text:"Dark"}],onChange:t=>{this.state.theme="default"===this.state.theme||"dark"===this.state.theme?t[0].value:"default"}}),new n.ss(t,{label:"Show favorites",name:"showFavorites",value:this.state.showFavorites,radio:!0,options:[{value:!0,text:"Show"},{value:!1,text:"Hide"}],onChange:t=>{this.state.showFavorites=t[0].value}}),new n.ss(t,{label:"View",name:"view",value:this.state.view,radio:!0,options:[{value:"tiles",text:"Tiles"},{value:"list",text:"List"},{value:"compact",text:"Compact"}],onChange:t=>{this.state.view=t[0].value}}),new n.ss(t,{label:"Folders position",name:"foldersPosition",value:this.state.foldersPosition,radio:!0,options:[{value:"top",text:"Top"},{value:"bottom",text:"Bottom"},{value:"default",text:"Default"}],onChange:t=>{this.state.foldersPosition=t[0].value}}),new n.$6(t,{label:"Sort by",name:"sort-by",value:this.state.sortBy,options:[{value:"changed-asc",text:t.i18n("Sort by changed")+"(⬆)"},{value:"changed-desc",text:t.i18n("Sort by changed")+"(⬇)"},{value:"name-asc",text:t.i18n("Sort by name")+"(⬆)"},{value:"name-desc",text:t.i18n("Sort by name")+"(⬇)"},{value:"size-asc",text:t.i18n("Sort by size")+"(⬆)"},{value:"size-desc",text:t.i18n("Sort by size")+"(⬇)"}],onChange:t=>{this.state.sortBy=t}}),new n.$6(t,{label:"Tile size",name:"tile-size",value:this.state.tileSize,options:[{value:"xsmall",text:"Extra small"},{value:"small",text:"Small"},{value:"default",text:"Default"},{value:"large",text:"Large"},{value:"xlarge",text:"Extra large"}],onChange:t=>{this.state.tileSize=t}})]),this.onChangeView()}};(0,i.Cg)([(0,o.watch)("state.view")],r.prototype,"onChangeView",null),r=(0,i.Cg)([o.component],r)},4858(t,e,s){"use strict";s.d(e,{H(){return a}});var i=s(31635),o=s(53557),n=(s(28712),s(1530)),r=s(35590);let a=class t extends n.U{className(){return"UISidebar"}render(){return"<div>\n\t\t\t<div class='&__hide-btn'>*angle-left*</div>\n\t\t\t<div class='&__favorites'>*heart* ~Favorites~</div>\n\t\t\t<div class='&__box'></div>\n\t\t</div>"}appendChildToContainer(t){this.getElm("box").appendChild(t)}addResize(){r.Z.remove(this),r.Z.install(this,screen.width>450?"right":"bottom")}constructor(t,e,s){super(t,e),this.state=s,this.onChangeFavorites()}onChangeFavorites(){this.setMod("has-favorites",!!this.state.favorites.length)}onClickHideButton(){return this.state.showSideBar=!this.state.showSideBar,!1}onClickFavorites(){return this.state.elements=this.state.favorites,!1}};(0,i.Cg)([(0,o.hook)("ready"),(0,o.watch)(":resize",{context:window}),(0,o.debounce)()],a.prototype,"addResize",null),(0,i.Cg)([(0,o.watch)("state.favorites")],a.prototype,"onChangeFavorites",null),(0,i.Cg)([(0,o.watch)("hide-btn:click")],a.prototype,"onClickHideButton",null),(0,i.Cg)([(0,o.watch)("favorites:click")],a.prototype,"onClickFavorites",null),a=(0,i.Cg)([o.component],a)},54969(t,e,s){"use strict";s.d(e,{q(){return a}});var i=s(31635),o=s(12222),n=(s(28712),s(65685)),r=s(15323);let a=class t extends n.D{className(){return"UIBrowserSource"}render(){return'<div>\n\t\t\t<div class="&__name"></div>\n\t\t\t<div class="&__tree"></div>\n\t\t</div>'}constructor(t,e){super(t,e),this.data=e,this.tree=new r.F(this.j,this.data.children),this.syncMod=!0,this.getElm("name").innerText=e.title||e.name,this.getElm("tree").appendChild(this.tree.container),t.e.on(this.container,"contextmenu",(s=>t.e.fire("contextmenuSource.filebrowser",e,s)))}};a=(0,i.Cg)([o.s],a)},73101(t,e,s){"use strict";s.d(e,{T(){return a}});var i=s(31635),o=s(53557),n=s(76185),r=s(54969);let a=class t extends n.Ue{constructor(){super(...arguments),this.syncMod=!0}className(){return"UIBrowserSources"}build(t){this.clear(),t.forEach((t=>{this.append(new r.q(this.jodit,t))}))}};a=(0,i.Cg)([o.component],a)},95833(t,e,s){"use strict";s.d(e,{E(){return r}});var i=s(31635),o=s(53557),n=(s(28712),s(76185));let r=class t extends n.D${className(){return"UIBrowserStatusBar"}render(){return"<div>\n\t\t\t<div class='&__slot-left'></div>\n\t\t\t<div class='&__slot-center'></div>\n\t\t\t<div class='&__slot-right'></div>\n\t\t</div>"}value(t,e="left"){return this.getElm("slot-"+e).innerText=t,this}};r=(0,i.Cg)([o.component],r)},15323(t,e,s){"use strict";s.d(e,{F(){return h}});var i,o=s(31635),n=s(12222),r=s(1530),a=s(11039);let h=i=class t extends r.U{className(){return"UITree"}constructor(t,e){super(t),this.syncMod=!0,this.build(e)}build(t){this.clear(),t.forEach((t=>{const e=new a.R(this.jodit,t);this.append(e),t.isActive&&e.setMod("active",!0),t.children.length&&this.append(new i(this.jodit,t.children))}))}};h=i=(0,o.Cg)([n.s],h)},36941(t,e,s){"use strict";s.d(e,{T(){return d}});var i,o=s(31635),n=s(53557),r=s(43977),a=s(1530),h=s(46366),l=s(72893),c=s(73556);let d=i=class t extends a.U{className(){return"UIVirtualScroll"}render(){return"<div>\n\t\t\t\t<div class=\"&__empty-message\">~There are no files~</div>\n\t\t\t\t<div class='&__loader'></div>\n\t\t\t\t<div class='&__drag-area'>~Drop image~</div>\n\t\t\t</div>"}constructor(t,e){super(t),this.stateManager=e,this.syncMod=!0,this.addItemsSelector()}reconcile(t){const e=this.elements.findIndex(((e,s)=>!t[s]||e.item.uniqueHashKey!==h.u.create(t[s]).uniqueHashKey));if(e>-1){for(let t=e;this.elements.length>t;t+=1)this.elements[t].destruct();this.elements.length=e}return e}build(t){const e=this.reconcile(t);t.slice(e>-1?e:this.elements.length).forEach((t=>{const e=new l.Q(this.jodit,t);Object.keys(this.mods).forEach((t=>{e.setMod(t,this.mods[t])})),this.append(e)})),this.setMod("empty",!this.elements.length)}onScrollLoadChunk(){!this.stateManager.isFavoriteItems&&this.j.o.pixelOffsetLoadNewChunk>this.container.scrollHeight-(this.container.scrollTop+this.container.offsetHeight)&&this.j.loadingManager.loadItemsChunk()}onDragOver(t){t.preventDefault(),this.setMod("dragover",!0)}onDragLeave(t){t.preventDefault(),this.setMod("dragover",!1)}addItemsSelector(){c.J.install(this)}static intersectRect(t,e){return!(e.left>t.left+t.width||t.left>e.left+e.width||e.top>t.top+t.height||t.top>e.top+e.height)}onSelectItems(t){const e=[];this.elements.forEach((s=>{const o=(0,r.G)(s.container);i.intersectRect(o,t)&&e.push(s.item)})),this.stateManager.state.activeElements=e}};(0,o.Cg)([(0,n.watch)(":afterResize"),(0,n.watch)(":resize"),(0,n.watch)("container:scroll"),(0,n.throttle)()],d.prototype,"onScrollLoadChunk",null),(0,o.Cg)([(0,n.watch)("container:dragover")],d.prototype,"onDragOver",null),(0,o.Cg)([(0,n.watch)(["container:dragleave","container:drop"])],d.prototype,"onDragLeave",null),d=i=(0,o.Cg)([n.component],d)},35590(t,e,s){"use strict";s.d(e,{Z(){return n}});var i=s(23545),o=s(4401);class n{static remove(t){(0,o.A)(t.container,{width:null,height:null}),t.container.classList.remove("jodit-ui-resize"),i.J.safeRemove(t.container.querySelector(".jodit-ui-resize__handle"))}static install(t,e){t.container.classList.add("jodit-ui-resize"),"static"===(0,o.A)(t.container,"position")&&(0,o.A)(t.container,"position","relative");const s=t.j.c.div("jodit-ui-resize__handle");s.classList.add("jodit-ui-resize__handle_type_"+e),t.container.appendChild(s),t.j.e.on(s,"mousedown touchstart",this.onStartResize.bind(this,t,e))}static onStartResize(t,e,s){const i=t.j.async.throttle(this.onResize.bind(this,t,{x:s.clientX,y:s.clientY,w:t.container.offsetWidth,h:t.container.offsetHeight,direction:e}),t.j.defaultTimeout/10);t.j.lock(),t.j.e.on(t.j.ow,"mousemove touchmove",i).one(t.j.ow,"mouseup touchend",this.onEndResize.bind(this,t,i))}static onResize(t,e,s){const i=["left","right"].includes(e.direction),n=t.container.parentElement;if(!n)return;let r;r=i?(e.w+(s.clientX-e.x)*("right"===e.direction?1:-1))/n.offsetWidth:(e.h+(s.clientY-e.y)*("top"===e.direction?1:-1))/n.offsetHeight,(0,o.A)(t.container,i?"width":"height",100*r+"%")}static onEndResize(t,e,s){t.j.e.off(t.j.ow,"mousemove touchmove",e),t.j.unlock()}}},73556(t,e,s){"use strict";s.d(e,{J(){return n}});var i=s(23545),o=s(4401);class n{static remove(t){i.J.safeRemove(t.container.querySelector(".jodit-ui-select-items")),t.j.e.off(t.container,"mousedown.uiselectitems touchstart.uiselectitems")}static install(t){const e=t.j.c.div("jodit-ui-select-items");t.j.e.on(t.container,"mousedown.uiselectitems touchstart.uiselectitems",this.onStartSelect.bind(this,t,e))}static onStartSelect(t,e,s){if(s.target!==t.container)return;(0,o.A)(e,{width:0,height:0}),t.container.appendChild(e);const i={x:s.clientX,y:s.clientY,w:t.container.offsetWidth,h:t.container.offsetHeight},n=t.j.async.throttle(this.onSelect.bind(this,t,e,i),t.j.defaultTimeout/10);t.j.lock(),t.j.e.on(t.j.ow,"mousemove touchmove",n).one(t.j.ow,"mouseup touchend",this.onEndSelect.bind(this,t,e,n)),t.onSelectItems({left:i.x,top:i.y,width:0,height:0})}static onSelect(t,e,s,i){const n={left:s.x>i.clientX?i.clientX:s.x,top:s.y>i.clientY?i.clientY:s.y,width:Math.abs(s.x-i.clientX),height:Math.abs(s.y-i.clientY)};(0,o.A)(e,n),t.onSelectItems(n)}static onEndSelect(t,e,s,o){i.J.safeRemove(e),t.j.e.off(t.j.ow,"mousemove touchmove",s),t.j.unlock()}}}},t=>t(t.s=50267)])}));